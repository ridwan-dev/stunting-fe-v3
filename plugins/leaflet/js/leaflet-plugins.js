!function (t, i, e) { var n, o = ["webkit", "Moz", "ms", "O"], r = {}; function a(t, e) { var n, o = i.createElement(t || "div"); for (n in e) o[n] = e[n]; return o } function s(t) { for (var i = 1, e = arguments.length; i < e; i++)t.appendChild(arguments[i]); return t } var l, f = (l = a("style"), s(i.getElementsByTagName("head")[0], l), l.sheet || l.styleSheet); function p(t, i, e, o) { var a = ["opacity", i, ~~(100 * t), e, o].join("-"), s = .01 + e / o * 100, l = Math.max(1 - (1 - t) / i * (100 - s), t), p = n.substring(0, n.indexOf("Animation")).toLowerCase(), d = p && "-" + p + "-" || ""; return r[a] || (f.insertRule("@" + d + "keyframes " + a + "{0%{opacity:" + l + "}" + s + "%{opacity:" + t + "}" + (s + .01) + "%{opacity:1}" + (s + i) % 100 + "%{opacity:" + t + "}100%{opacity:" + l + "}}", 0), r[a] = 1), a } function d(t, i) { var n, r, a = t.style; if (a[i] !== e) return i; for (i = i.charAt(0).toUpperCase() + i.slice(1), r = 0; r < o.length; r++)if (a[n = o[r] + i] !== e) return n } function u(t, i) { for (var e in i) t.style[d(t, e) || e] = i[e]; return t } function c(t) { for (var i = 1; i < arguments.length; i++) { var n = arguments[i]; for (var o in n) t[o] === e && (t[o] = n[o]) } return t } function h(t) { for (var i = { x: t.offsetLeft, y: t.offsetTop }; t = t.offsetParent;)i.x += t.offsetLeft, i.y += t.offsetTop; return i } var y = { lines: 12, length: 7, width: 5, radius: 10, rotate: 0, color: "#000", speed: 1, trail: 100, opacity: .25, fps: 20, zIndex: 2e9, className: "leaflet-spinner", top: "auto", left: "auto" }, g = function t(i) { if (!this.spin) return new t(i); this.opts = c(i || {}, t.defaults, y) }; g.defaults = {}, c(g.prototype, { spin: function (t) { this.stop(); var i, e, o = this, r = o.opts, s = o.el = u(a(0, { className: r.className }), { position: "relative", zIndex: r.zIndex }), l = r.radius + r.length + r.width; if (t && (t.insertBefore(s, t.firstChild || null), e = h(t), i = h(s), u(s, { left: ("auto" == r.left ? e.x - i.x + (t.offsetWidth >> 1) : r.left + l) + "px", top: ("auto" == r.top ? e.y - i.y + (t.offsetHeight >> 1) : r.top + l) + "px" })), s.setAttribute("aria-role", "progressbar"), o.lines(s, o.opts), !n) { var f = 0, p = r.fps, d = p / r.speed, c = (1 - r.opacity) / (d * r.trail / 100), y = d / r.lines; !function t() { f++; for (var i = r.lines; i; i--) { var e = Math.max(1 - (f + i * y) % d * c, r.opacity); o.opacity(s, r.lines - i, e, r) } o.timeout = o.el && setTimeout(t, ~~(1e3 / p)) }() } return o }, stop: function () { var t = this.el; return t && (clearTimeout(this.timeout), t.parentNode && t.parentNode.removeChild(t), this.el = e), this }, lines: function (t, i) { var e, o = 0; function r(t, e) { return u(a(), { position: "absolute", width: i.length + i.width + "px", height: i.width + "px", background: t, boxShadow: e, transformOrigin: "left", transform: "rotate(" + ~~(360 / i.lines * o + i.rotate) + "deg) translate(" + i.radius + "px,0)", borderRadius: (i.width >> 1) + "px" }) } for (; o < i.lines; o++)e = u(a(), { position: "absolute", top: 1 + ~(i.width / 2) + "px", transform: i.hwaccel ? "translate3d(0,0,0)" : "", opacity: i.opacity, animation: n && p(i.opacity, i.trail, o, i.lines) + " " + 1 / i.speed + "s linear infinite" }), i.shadow && s(e, u(r("#000", "0 0 4px #000"), { top: "2px" })), s(t, s(e, r(i.color, "0 0 1px rgba(0,0,0,.1)"))); return t }, opacity: function (t, i, e) { i < t.childNodes.length && (t.childNodes[i].style.opacity = e) } }), function () { function t(t, i) { return a("<" + t + ' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">', i) } var i = u(a("group"), { behavior: "url(#default#VML)" }); !d(i, "transform") && i.adj ? (f.addRule(".spin-vml", "behavior:url(#default#VML)"), g.prototype.lines = function (i, e) { var n = e.length + e.width, o = 2 * n; function r() { return u(t("group", { coordsize: o + " " + o, coordorigin: -n + " " + -n }), { width: o, height: o }) } var a, l = 2 * -(e.width + e.length) + "px", f = u(r(), { position: "absolute", top: l, left: l }); function p(i, o, a) { s(f, s(u(r(), { rotation: 360 / e.lines * i + "deg", left: ~~o }), s(u(t("roundrect", { arcsize: 1 }), { width: n, height: e.width, left: e.radius, top: -e.width >> 1, filter: a }), t("fill", { color: e.color, opacity: e.opacity }), t("stroke", { opacity: 0 })))) } if (e.shadow) for (a = 1; a <= e.lines; a++)p(a, -2, "progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)"); for (a = 1; a <= e.lines; a++)p(a); return s(i, f) }, g.prototype.opacity = function (t, i, e, n) { var o = t.firstChild; n = n.shadow && n.lines || 0, o && i + n < o.childNodes.length && (o = (o = (o = o.childNodes[i + n]) && o.firstChild) && o.firstChild) && (o.opacity = e) }) : n = d(i, "animation") }(), t.Spinner = g }(window, document), function (t, i) { "function" == typeof define && define.amd ? define(["leaflet", "spin.js"], function (i, e) { t(i, e) }) : "object" == typeof exports ? module.exports = function (i, e) { return void 0 === i && (i = require("leaflet")), void 0 === e && (e = require("spin.js")), t(i, e), i } : void 0 !== i && i.L && i.Spinner && t(i.L, i.Spinner) }(function (t, i) { var e = { spin: function (t, e) { t ? (this._spinner || (this._spinner = new i(e).spin(this._container), this._spinning = 0), this._spinning++) : (this._spinning--, this._spinning <= 0 && this._spinner && (this._spinner.stop(), this._spinner = null)) } }; t.Map.include(e), t.Map.addInitHook(function () { this.on("layeradd", function (t) { t.layer.loading && this.spin(!0), "function" == typeof t.layer.on && (t.layer.on("data:loading", function () { this.spin(!0) }, this), t.layer.on("data:loaded", function () { this.spin(!1) }, this)) }, this), this.on("layerremove", function (t) { t.layer.loading && this.spin(!1), "function" == typeof t.layer.on && (t.layer.off("data:loaded"), t.layer.off("data:loading")) }, this) }) }, window);